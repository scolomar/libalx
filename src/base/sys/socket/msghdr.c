/******************************************************************************
 *	Copyright (C) 2020	Alejandro Colomar Andr√©s		      *
 *	SPDX-License-Identifier:	LGPL-2.0-only			      *
 ******************************************************************************/


/******************************************************************************
 ******* include **************************************************************
 ******************************************************************************/
#include "libalx/base/sys/socket/msghdr.h"

#include <stddef.h>

#include <sys/types.h>
#include <sys/socket.h>


/******************************************************************************
 ******* define ***************************************************************
 ******************************************************************************/


/******************************************************************************
 ******* enum / struct / union ************************************************
 ******************************************************************************/


/******************************************************************************
 ******* static prototypes ****************************************************
 ******************************************************************************/


/******************************************************************************
 ******* global functions *****************************************************
 ******************************************************************************/
void	alx_wrap_msghdr	(struct msghdr *restrict msg,
			 struct iovec *restrict iov,
			 ssize_t bufsiz, void *restrict buf,
			 ssize_t cbufsiz, void *restrict cbuf)
{

	iov->iov_base	= buf;
	iov->iov_len	= bufsiz;

	msg->msg_name		= NULL;
	msg->msg_iov		= iov;
	msg->msg_iovlen		= 1;
	msg->msg_control	= cbuf;
	msg->msg_controllen	= cbufsiz;
}


/******************************************************************************
 ******* alias ****************************************************************
 ******************************************************************************/
ALX_ALIAS_WEAK_DEF(wrap_msghdr, alx_wrap_msghdr);


/******************************************************************************
 ******* static function definitions ******************************************
 ******************************************************************************/


/******************************************************************************
 ******* end of file **********************************************************
 ******************************************************************************/

